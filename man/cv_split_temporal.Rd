% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/k_fold.R
\name{cv_split_temporal}
\alias{cv_split_temporal}
\title{Special resample strategy for K-fold cross-validation on time series data.}
\usage{
cv_split_temporal(data, y, id, time, nfolds = 5L, probs = seq(0, 1,
  length.out = 11))
}
\arguments{
\item{data}{data.table with \code{y}, \code{id} and \code{time}.}

\item{y}{Target variable name (character).}

\item{id}{Identifier of each time series (character).}

\item{time}{Time variable name (character).}

\item{nfolds}{Number of folds (min 2, max 20).}

\item{probs}{Numeric vector of probabilities with values in \emph{[0, 1]} range.}
}
\value{
data.table with \code{nfolds} columns. Each column is an indicator variable
with 1 corresponds to observations in validation dataset (stratified by target).
}
\description{
Special resample strategy for K-fold cross-validation on time series data.
}
\details{
When some observations from one time series fall into validation fold, train/validation
indices for this time series will be reassigned: only last observation will be in validation fold.
This ensures that training performs on past data and predictions are made for future observations.
TODO: allow to specify arbitrary number of observations for validation set.
}
\examples{
dt <- data.table(
    user = rep(1:100, each = 10),
    date = as.POSIXct(rep(seq(1.8*10e8, 1.8*10e8 + 777600, by = 86400), 100),
                      origin = "1960-01-01"),
    target = rnorm(1e3)
)
cv_split_temporal(dt, "target", "user", "time")

}
